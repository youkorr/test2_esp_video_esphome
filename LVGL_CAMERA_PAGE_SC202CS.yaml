# Page LVGL simplifi√©e pour cam√©ra SC202CS
# R√©solutions disponibles: 640x480 (VGA) ou 720P
# Contr√¥les: BACK, START, STOP, INFO

# ============================================
# VERSION 1: VGA 640x480 (recommand√© pour petits √©crans)
# ============================================
lvgl:
  pages:
    - id: camera_page_vga
      bg_color: 0x000000

      on_load:
        - lambda: |-
            ESP_LOGI("camera", "üì∏ Page cam√©ra SC202CS VGA charg√©e");
            ESP_LOGI("camera", "Canvas: 640x480 centr√© (x=80)");

            // Optionnel: d√©marrer automatiquement le streaming
            // D√©commentez pour auto-start:
            // if (id(tab5_cam).start_streaming()) {
            //   lv_label_set_text(id(status_label), "VGA");
            // }

      widgets:
        # Canvas VGA centr√© sur √©cran 800x480
        - canvas:
            id: camera_canvas
            width: 640
            height: 480
            x: 80   # Centr√©: (800-640)/2 = 80
            y: 0
            bg_color: 0x000000

        # Bouton RETOUR
        - button:
            id: btn_camera_back
            width: 70
            height: 45
            x: 5
            y: 10
            bg_color: 0x333333
            radius: 8
            on_click:
              then:
                - lambda: |-
                    ESP_LOGI("camera", "üîô Retour");
                    id(tab5_cam).stop_streaming();
                - lvgl.page.show: page_home
            widgets:
              - label:
                  text: "BACK"
                  text_color: 0xFFFFFF
                  text_font: nunito_18
                  text_align: CENTER

        # Bouton START
        - button:
            id: btn_start
            width: 70
            height: 45
            x: 5
            y: 65
            bg_color: 0x00AA00
            radius: 8
            on_click:
              then:
                - lambda: |-
                    ESP_LOGI("camera", "‚ñ∂Ô∏è  START SC202CS");
                    if (id(tab5_cam).start_streaming()) {
                      lv_label_set_text(id(status_label), "VGA");
                    }
            widgets:
              - label:
                  text: "START"
                  text_color: 0xFFFFFF
                  text_font: nunito_18
                  text_align: CENTER

        # Bouton STOP
        - button:
            id: btn_stop
            width: 70
            height: 45
            x: 5
            y: 120
            bg_color: 0xCC0000
            radius: 8
            on_click:
              then:
                - lambda: |-
                    id(tab5_cam).stop_streaming();
                    lv_label_set_text(id(status_label), "STOP");
            widgets:
              - label:
                  text: "STOP"
                  text_color: 0xFFFFFF
                  text_font: nunito_18
                  text_align: CENTER

        # Bouton INFO
        - button:
            id: btn_info
            width: 70
            height: 45
            x: 5
            y: 175
            bg_color: 0x4682B4
            radius: 8
            on_click:
              then:
                - lambda: |-
                    ESP_LOGI("camera", "üìä SC202CS VGA");
                    ESP_LOGI("camera", "R√©solution: 640x480");
                    ESP_LOGI("camera", "Bayer: BGGR");
                    ESP_LOGI("camera", "Binning: 2x2");
                    ESP_LOGI("camera", "MIPI: 1-lane");
            widgets:
              - label:
                  text: "INFO"
                  text_color: 0xFFFFFF
                  text_font: nunito_18
                  text_align: CENTER

        # Status
        - label:
            id: status_label
            text: "READY"
            x: 40
            y: 450
            text_color: 0xFF8800
            text_font: nunito_20

# ============================================
# VERSION 2: 720P plein √©cran (pour √©crans 800x480 ou plus)
# ============================================
# ATTENTION: 720P (1280x720) sera mis √† l'√©chelle sur √©cran 800x480
# Le canvas doit faire 800x480 mais la cam√©ra capture en 1280x720
#
# lvgl:
#   pages:
#     - id: camera_page_720p
#       bg_color: 0x000000
#
#       widgets:
#         # Canvas plein √©cran
#         - canvas:
#             id: camera_canvas
#             width: 800
#             height: 480
#             x: 0
#             y: 0
#             bg_color: 0x000000
#
#         # Boutons en overlay
#         - button:
#             id: btn_back
#             width: 70
#             height: 45
#             x: 720
#             y: 10
#             bg_color: 0x333333
#             bg_opa: 200  # Semi-transparent
#             radius: 8
#             on_click:
#               then:
#                 - lambda: |-
#                     id(tab5_cam).stop_streaming();
#                 - lvgl.page.show: page_home
#             widgets:
#               - label:
#                   text: "BACK"
#                   text_color: 0xFFFFFF
#                   text_font: nunito_18
#
#         # ... (autres boutons)

# ============================================
# CONFIGURATION CAM√âRA SC202CS
# ============================================
# mipi_dsi_cam:
#   id: tab5_cam
#   i2c_id: bsp_bus
#   sensor_type: sc202cs
#   xclk_pin: GPIO36
#   xclk_freq: 24000000
#   sensor_addr: 0x30           # SC202CS = 0x30
#   resolution: "VGA"           # Utilise custom format VGA
#   pixel_format: RGB565
#   framerate: 30

# NOTES:
# - VGA (640x480) recommand√© pour petits √©crans (4-5")
# - M√©moire VGA: ~600 KB vs 1.8 MB pour 720P
# - SC202CS utilise 1-lane MIPI (vs 2-lane pour OV5647/OV02C10)
